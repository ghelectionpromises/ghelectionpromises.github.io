<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
    <!-- Gh Election Promises Copyright 2016 MIT Open Source  -->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
        <meta name="description" content="Track NPP's 2016 Election Promises with Gh Election Promises Tracker." />
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <title>Gh Election Promises Tracker</title>
        <!-- Schema.org markup for Google+ -->
        <meta itemprop="name" content="Gh Election Promises Tracker">
        <meta itemprop="author" content="Gh Election Promises">
        <meta itemprop="datePublished" content="2016-12-08T00:00:00-00:00">
        <meta itemprop="publisher" content="Gh Election Promises">
        <meta itemprop="description" content="Track NPP's 2016 Election Promises with Gh Election Promises Tracker.">
        <meta itemprop="headline" content="Gh Election Promises Tracker - The Best Way to track NPP's 2016 Election promises." />
        <meta itemprop="image" content="assets/npp_img.jpg">
        <!-- Twitter Card data -->
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:site" content="@dotkwame">
        <meta name="twitter:title" content="Gh Election Promises Tracker">
        <meta name="twitter:description" content="Track NPP's 2016 Election Promises with Gh Election Promises Tracker.">
        <meta name="twitter:creator" content="@dotkwame">
        <!-- Twitter summary card with large image must be at least 280x150px -->
        <meta name="twitter:image" content="https://ghelectionpromises.github.io/assets/npp-img.jpg">

        <!-- Open Graph data -->
        <meta property="og:title" content="Gh Election Promises Tracker" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://ghelectionpromises.github.io/" />
        <meta property="og:image" content="https://ghelectionpromises.github.io/assets/trump-main.jpg" />
        <meta property="og:description" content="Track NPP's 2016 Election Promises with Gh Election Promises Tracker." />
        <meta property="og:site_name" content="Gh Election Promises Tracker" />
        <meta property="article:published_time" content="2016-11-10T00:51:00-05:00" />
        <meta property="article:modified_time" content="2016-11-10T00:52:47-05:00" />
        <meta property="article:section" content="Politics" />
        <meta property="article:tag" content="Politics" />
        <link rel="shortcut icon"                       href="/assets/favicon.ico" type="image/x-icon" />
        <meta name="apple-mobile-web-app-title"         content="Gh Election Promises Tracker">
        <meta name="application-name"                   content="Gh Election Promises Tracker">
        <meta name="theme-color"                        content="#ffffff">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="/css/styles.css">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <!-- Font Awesome -->
        <script src="https://use.fontawesome.com/1e8cbd500f.js"></script>
        <!-- Analytics JS -->
        <script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-88760149-2', 'auto');
              ga('send', 'pageview');
        </script>
        <script id="site-data" type="application/json">{{site.data.data | jsonify}}</script>
    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">

                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                    <a class="navbar-brand" href="https://trumptracker.github.io/">
                        <b>Gh Election Promises Tracker</b>
                    </a>

                </div>

                <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                    <form class="navbar-form" role="search">
                        <div class="input-group">
                            <input id="search-field" type="search" class="form-control" placeholder="Search" name="q">
                            <div class="input-group-btn">
                                <button class="btn btn-default" type="submit">
                                    <i class="glyphicon glyphicon-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"></a></li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->

            </div>
            <!-- /.container-fluid -->

        </nav>

        {{content}}

        <div class="container-fluid">
            <div class="page-header">
                <h5 class="text-right">Open Source at <a href="https://github.com/TrumpTracker/trumptracker.github.io"> <i class="fa fa-github fa-fw"></i></a></h5>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <p class="text-muted">Inspired By <a href="https://trumptracker.github.io" target="_blank" rel="nofollow">TrumpTracker</a></p>
                    </div>
                    <div class="col-md-3">
                        <p class="text-muted"><a href="https://raw.githubusercontent.com/TrumpTracker/ghelectionpromises.github.io/master/_data/data.yaml" target="_blank" rel="nofollow">Open Data</a></p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <!-- Main JavaScript -->
        <script>
            $(document).ready(function () {

                // temp fix for table alignment
                $('html > head').append($('<style>tbody > tr:nth-child(1) > td:nth-child(2) { width:100%; }</style>'));

                // tabs
                $('#myTabs a').click(function (e) {
                    e.preventDefault()
                    $(this).tab('show')
                });
                $(function () {
                    $('[data-toggle="tooltip"]').tooltip()
                });

                // search function
                $("div.tab-pane input.search").keyup(function () {
                    var search = $(this).val().toLowerCase();
                    $(this).parent().parent().find("tr").hide();
                    $(this).parent().parent().find("tbody tr").each(function () {
                        if ($(this).text().toLowerCase().indexOf(search) != -1) {
                            $(this).show();
                            //show the heading for the section
                            $(this).parent().prev("thead").find("tr").show();
                        }
                    }, search);
                });
                $("#search-field").keyup(function () {
                    $("#search-results").html("");
                    if($("#search-field").val()!="") {
                        var search = $("#search-field").val().toLowerCase();
                        //show the results div
                        $("div.row.search-results").show();
                        //loop through each tab panel (easier to grab heading info)
                        $("div[role='tabpanel']").each(function () {
                            var panel_id = $(this).attr("id");
                            var display_section = true;
                            var display_heading = true
                            $(this).find("tbody td").each(function () {
                                if ($(this).text().toLowerCase().indexOf(search) != -1) {
                                    if(display_section) {
                                        //appends section to search results
                                        $("#search-results").append('<li class="list-group-item active"><span>' +
                                                $("ul.nav-tabs a[href='#" + panel_id + "']").html() + '</span></li>');
                                        //prevents duplicate section titles
                                        display_section = false;
                                    }
                                    if(display_heading) {
                                        //appends heading to search results
                                        $("#search-results").append('<li class="list-group-item list-group-item-info"><span>' +
                                                $(this).parent().parent().prev("thead").find("tr th").html() + '</span></li>');
                                        //prevents duplicate heading titles
                                        display_heading = false;
                                    }

                                    // Default display class for all list items to be added
                                    var displayClass = "list-group-item";

                                    // Get the class of the table row for this td element
                                    var rowClass = $(this).parent().prop('className');

                                    // Not empty implies it is either danger (broken policy)
                                    // or success (achieved policy)
                                    if (rowClass !== "") {
                                      displayClass += " list-group-item-" + rowClass;
                                    }
                                    $("#search-results").append('<li class="'+ displayClass + '"><span>' + $(this).text() + '</span></li>')
                                }
                            });
                        });
                    } else {
                        //fixes spacing caused by empty elements
                        $("div.row.search-results").hide();
                    }
                });
                $("form.navbar-form").submit(function(e){
                    e.preventDefault();
                });

                var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
                var todayDate = Date.now();
                // Inaguration date
                var inagurationDate = new Date(2017,00,007);

                var daysUntilInaguration = Math.floor((inagurationDate.getTime() - todayDate)/(oneDay));

                if (daysUntilInaguration === 0) {
                    $('#inauguration-time').text('Inauguration day is today.');
                } else if (daysUntilInaguration > 0) {
                    $('#inauguration-days').text(daysUntilInaguration);
                } else {
                    $('.inauguration-time-container').hide();
                }

                var daysInOffice = Math.floor((todayDate - inagurationDate)/(oneDay));
                if (daysInOffice < 0) {
                    daysInOffice = 0;
                }
                $('#days-in-office').text(daysInOffice);

                // Parse site data.json
                var siteData = JSON.parse($('#site-data').html());
                var totalPoints = 0;
                var pointsNotStarted = 0;
                var pointsInProgress = 0;
                var pointsAchieved = 0;
                var pointsBroken = 0;

                for(var i = 0; i < siteData.tabs.length; i++) {
                    for(var j = 0; j < siteData.tabs[i].sections.length; j++) {
                        for(var k = 0; k < siteData.tabs[i].sections[j].points.length; k++) {
                            var point = siteData.tabs[i].sections[j].points[k];
                            totalPoints++;
                            if (point.status === 'notStarted') {
                                pointsNotStarted++;
                            } else if (point.status === 'inProgress') {
                                pointsInProgress++;
                            } else if (point.status === 'achieved') {
                                pointsAchieved++;
                            } else if (point.status === 'broken') {
                                pointsBroken++;
                            }
                        }
                    }
                }

                $('.total-points').text(totalPoints || '0');
                $('#points-achieved').text(pointsAchieved || '0');
                $('#points-broken').text(pointsBroken || '0');
                $('#points-not-started').text(pointsNotStarted || '0');
                $('#points-in-progress').text(pointsInProgress || '0');

            });
        </script>
    </body>
</html>
